---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<Layout>
    <main class="max-w-2xl mx-auto py-8">
        <h1 class="text-3xl font-bold mb-8">Blog</h1>
        <ul class="flex flex-col gap-4">
            {
                posts.map((post) => (
                    <li>
                        <a href={`/blog/${post.id}`} class="group">
                            <p class="text-sm text-gray-500 dark:text-gray-400">
                                {post.data.publishDate.toLocaleDateString(
                                    "en-US",
                                    {
                                        year: "numeric",
                                        month: "long",
                                        day: "numeric",
                                    },
                                )}
                            </p>
                            <h2 class="text-xl font-semibold group-hover:text-indigo-500 transition-colors">
                                {post.data.title}
                            </h2>
                            <p class="text-gray-600 dark:text-gray-400">
                                {post.data.description}
                            </p>
                        </a>
                    </li>
                ))
            }
        </ul>
    </main>
</Layout>
